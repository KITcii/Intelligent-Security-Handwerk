spring:
  datasource:
    username: sauser
    password: h2-init
    url: jdbc:h2:mem:user-db;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL;DATABASE_TO_UPPER=false
    driverClassName: org.h2.Driver

  jpa:
    show-sql: false
    hibernate:
      ddl-auto: none
      #ddl-auto: create # Use create and javax properties to let hibernate create the schema file
    properties:
      #jakarta.persistence.schema-generation.scripts.action: create
      #jakarta.persistence.schema-generation.scripts.create-target: ish-schema.sql
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: true  # Format SQL queries for readability

  h2:
    console:
      enabled: true
      # default path: h2-console
      path: /h2-ui
      settings:
        web-allow-others: true

  flyway:
    enabled: true
    locations: >
      classpath:db/migration,
      classpath:db/migration-dev
    clean-disabled: false
    placeholders:
      identity_syntax: generated by default as identity

springdoc:
  api-docs:
    enabled: true
    path: /api/v1.0/users/api-docs
  swagger-ui:
    enabled: true
    path: /api/v1.0/users/swagger-ui
  show-login-endpoint: true

# https://www.baeldung.com/spring-boot-shutdown
# https://www.baeldung.com/java-restart-spring-boot-app
management:
  endpoint:
    shutdown:
      enabled: true
  endpoints:
    web.exposure.include: shutdown
    web.base-path: ''

logging:
  level:
    ROOT: INFO
    org.springframework.boot: INFO
    #org.springframework.security: DEBUG
    ish.user.*: TRACE
    org.hibernate:
      SQL: TRACE
      type: INFO
      type.descriptor.sql.BasicBinder: TRACE
      engine.jdbc.spi.SqlExceptionHelper: ERROR
    org.springframework.core.env: DEBUG
  # config can be omitted due to autodiscover when named logback.xml
  config: classpath:logback-dev.xml

server:
  error:
    # when to include a stacktrace attribute (never/always/on-trace-param)
    include-stacktrace: always

ish:
  error:
    handling:
      stacktrace: true
  auth:
    skip-verification: ${SKIP_VERIFICATION}
